---
layout: default
title: Meldingsutveksling i Sikker Digital Post
headtitle: Sikker digital post
---


Postforsendelsen skal overføres fra Databehandler ved bruk av en ebMS 3.0 Message Service Handler (MSH). 
MSH'en er virksomhetens tilgangpunkt inn til ebMS 3.0 rammeverket som er ansvarlig for videre transport.
Avsender sin MSH skal støtte "The AS4 Light Client Conformance Profile":http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/profiles/AS4-profile/v1.0/os/AS4-profile-v1.0-os.html#__RefHeading__26166_1909778835
Det er flere forskjellige scenarier for hvordan MSH blir tatt i bruk av (eller integrert inn i) avsender sine løsninger. 
Det er opp til avsender om man vil fullintegrere MSH inn i eksisterende løsning, benytte seg av en standard "hyllevare" løsning med lokal integrasjon eller benytte seg av tredjepart som MSH. 

"!{width:90%}ebms_flyt_diagram.jpg!":ebms_flyt_diagram.jpg

Les mer om  "meldingsidentifikatorer":MeldingsIdentifikatorer

h3. AS4 Light Client profilen

ebMS benytter konseptet P-Mode (Processing Mode) til å beskrive en samling parameterer som definerer hvordan en melding er utvekslet mellom to Message Serivce Handlers (MSH). P-Mode paramtererne er delt inn i flere undergrupper for generelle, protokoll, forretningsinfo, feilhåndtering, pålitlighet og sikkerhet.

AS4 Light client profilen definerer hvilke av disse som en implementasjon skal støtte.

h4. Grensesnitt mellom avsender og MF

Parametere for MSH oppsett mellom avsender og MF

h5. Generelle parametere

|_. P-Mode |_. Beskrivelse |_. Verdi |
| PMode.ID | Unik identifikator for paramtersettet | "FormidleDigitalPostForsendelse" / "Kvitteringsforespørsel" |
| PMode.Agreement | Unik identifikator for samarbeidsprotokollen | "http://begrep.difi.no/SikkerDigitalPost/Meldingsutveksling" |
| PMode.MEP | Message Exchange Pattern | "http://www.oasis-open.org/committees/ebxml-msg/one-way" |
| PMode.MEPbinding | Retning på kommunikasjon, push eller pull | "http://www.oasis-open.org/committees/ebxml-msg/push" |
| PMode.Initiator.Party | Identifikator for den som initierar sendinga | "SBDH:Sender - orgnr" |
| PMode.Initiator.Role | Rolle for den som initierar sendinga | Ref til aktør - avsender, MF eller PB |
| PMode.Initiator.Authorization.username | Skal kunne støtte bruk av wsse:UsernameToken | - ikke relevant - |
| PMode.Initiator.Authorization.password | Skal kunne støtte bruk av wsse:UsernameToken | - ikke relevant - |
| PMode.Responder.Party | Identifikator for den som er mottaker | MF orgnr |
| PMode.Responder.Role | Rolle for den som mottar  | "Meldingsformidler" |
| PMode.Responder.Authorization.username | Skal kunne støtte bruk av wsse:UsernameToken | - ikke relevant - |
| PMode.Responder.Authorization.password | Skal kunne støtte bruk av wsse:UsernameToken | - ikke relevant - |

h5. Protokoll

|_. P-Mode |_. Beskrivelse |_. Verdi |
| PMode<notextile>[1]</notextile>.Protocol.Address |  | "HTTPS 1.1" |
| PMode<notextile>[1]</notextile>.Protocol.SOAPVersion |  | "SOAP 1.2" |

h5. 

|_. P-Mode |_. Beskrivelse |_. Verdi |
| PMode<notextile>[1]</notextile>.BusinessInfo.Service | support required | |
| PMode<notextile>[1]</notextile>.BusinessInfo.Action | support required | |
| PMode<notextile>[1]</notextile>.BusinessInfo.Properties[]: | support required. | |

2.2.3.4     PMode<notextile>[1]</notextile>.ErrorHandling

|_. P-Mode |_. Beskrivelse |_. Verdi |
| PMode<notextile>[1]</notextile>.ErrorHandling.Report.AsResponse | support required (true/false)  as initiator of the one-way / push, as well as for the eb:PullRequest signal (PMode<notextile>[1]</notextile>[s]). | |
| PMode<notextile>[1]</notextile>.ErrorHandling.Report.ProcessErrorNotifyProducer | support required (true/false) | |
| PMode<notextile>[1]</notextile>.ErrorHandling.Report.DeliveryFailuresNotifyProducer | support required (true/false) | |

h5. Pålitlighet

Støtte ikke påkrevd i profilen.

h5. Sikkerhet

|_. P-Mode |_. Beskrivelse |_. Verdi |
| PMode<notextile>[1]</notextile>.Security.WSSVersion | support required for: 1.1 | |
| PMode<notextile>[1]</notextile>.Security.X509.Sign | support required. | |
| PMode<notextile>[1]</notextile>.Security.X509.Signature.Certificate | support required. | |
| PMode<notextile>[1]</notextile>.Security.X509.Signature.HashFunction |  support required. | |
| PMode<notextile>[1]</notextile>.Security.X509.Signature.Algorithm | support required. | |
| PMode<notextile>[1]</notextile>.Security.X509.Encryption.Encrypt | support not required. | - ikke relevant - |
| PMode<notextile>[1]</notextile>.Security.X509.Encryption.Certificate | support not required. | - ikke relevant - |
| PMode<notextile>[1]</notextile>.Security.X509.Encryption.Algorithm | support not required. |- ikke relevant - |
| PMode<notextile>[1]</notextile>.Security.X509.Encryption.MinimumStrength | support not required | - ikke relevant - |
| PMode<notextile>[1]</notextile>.Security.UsernameToken.username | support required. | - ikke relevant - |
| PMode<notextile>[1]</notextile>.Security.UsernameToken.password | support required. | - ikke relevant - |
| PMode<notextile>[1]</notextile>.Security.UsernameToken.Digest | support required (true/false) |- ikke relevant - |
| PMode<notextile>[1]</notextile>.Security.UsernameToken.Nonce |  support not required | - ikke relevant -|
| PMode<notextile>[1]</notextile>.Security.UsernameToken.Created | support required. |- ikke relevant - |
| PMode<notextile>[1]</notextile>.Security.PModeAuthorize | support required (true/false) | |
| PMode<notextile>[1]</notextile>.Security.SendReceipt | support required (true/false) | |
| Pmode<notextile>[1]</notextile>.Security.SendReceipt.ReplyPattern | support required for “response”if PMode.MEPbinding is "push", and for "callback" if PMode.MEPbinding is "pull". | |

h3. Eksempler

Det er utarbeidet noen eksempler på SOAP meldinger knyttet til flyt diagrammet over.
Eksemplene finnes her: "eksempler/soap":eksempler/soap/.

h3. Refererte standarder

* "ebMS 3.0":http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/core/os/ebms_core-3.0-spec-os.pdf
* "AS4 profilen":http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/profiles/AS4-profile/v1.0/os/AS4-profile-v1.0-os.html 
* "The AS4 Light Client Conformance Profile":http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/profiles/AS4-profile/v1.0/os/AS4-profile-v1.0-os.html#__RefHeading__26166_1909778835
