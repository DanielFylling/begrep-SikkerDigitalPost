---
layout: default
title: Sikker digital dokumentpakke 
headtitle: Sikker digital post
---

h3. Introduksjon

En forsendelse i Sikker digital post inneholder blant annet informasjon for varsling og et hoveddokument med null eller flere vedlegg.

Her beskrives hvordan dokumenter som sendes i Sikker digital post er beskyttet.

Dokumentene og metadata relatert til dokumentene pakkes i en dokumentpakke som ivaretar dokumentenes integritet, samt integriteten til metadata relatert til dokumentene. Dokumentpakken krypteres med en symmetrisk engangsnøkkel, og den symmetriske nøkkelen krypteres med mottakerens sertifikat som hentes fra oppslagstjenesten for kontaktinformasjon.

h3. Referanser

[1] ETSI, «ETSI TS 102 918: "Electronic Signatures and Infrastructures (ESI); Associated Signature":http://www.etsi.org/deliver/etsi_ts/102900_102999/102918/01.03.01_60/ts_102918v010301p.pdf ,» ETSI, 2013-06.
[2] ETSI, «ETSI TS 103 174: "Electronic Signatures and Infrastructures (ESI); ASiC Baseline Profile":http://www.etsi.org/deliver/etsi_ts/103100_103199/103174/02.02.01_60/ts_103174v020201p.pdf ,» ETSI, 2013-06.
[3] ETSI, «ETSI TS 101 903: "Electronic Signatures and Infrastructures (ESI); XML Advanced Electronic Signatures (XAdES)":http://www.etsi.org/deliver/etsi_ts%5C101900_101999%5C101903%5C01.04.02_60%5Cts_101903v010402p.pdf ,» ETSI, 2010-12.
[4]	ETSI, «ETSI TS 103 171: "Electronic Signatures and Infrastructures (ESI); XAdES Baseline Profile":http://www.etsi.org/deliver/etsi_ts/103100_103199/103171/02.01.01_60/ts_103171v020101p.pdf ,» ETSI, 2012-03.

h3. ASiC profil for dokumentpakken brukt i sikker digital post.

Hoveddokumentet og vedleggene pakkes sammen i en dokumentpakke sammen med noe metadata i henhold til [1], og videre begrenset i henhold til profilen definert i [2]. Ytterlige begrensninger følger nedenfor:

[2] krav 6.1 “ASiC conformance” skal være “ASiC-E XAdES”.
[2] krav 8.1 “ASiC-E Media type identification” skal være “ASiC file extension is ".asice"”
[2] krav 8.2 “ASiC-E Signed data object”. Alle filer utenfor META-INF katalogen skal være signert.  
[2] 8.3.1 «ASiC-E XAdES signature» Det skal kun være en signatur i META-INF katalogen, med navn signature.xml. Denne signaturen skal dekke alle andre filer i beholderen, og avsenderens virksomhetssertifikat skal benyttes for signering.
[2] 8.3.2 “Requirements for the contents of Container” refererer til [1] 6.2.2 punkt 4b) “"META-INF/manifest.xml" if present […]”. Denne filen skal ikke være tilstede.

h3. Signatur i dokumentpakken for sikker digital post

Signaturene i dokumentpakken BØR være signert av "Behandlingsansvarlig":AktorIdentifikatorer, men KAN signeres av "Databehandler":AktorIdentifikatorer.

Signaturen skal være i henhold til [3] med basisprofilen definert i [4] (B-Level Conformance). Ytterlige begrensninger følger nedenfor:

[4] krav 5.1 «Algorithm requirements». Signeringsalgoritmen skal være "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256":http://www.w3.org/2001/04/xmldsig-more#rsa-sha256. Fingeravtrykksalgoritmen i referansene skal være "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256":http://www.w3.org/2001/04/xmldsig-more#rsa-sha256. Fingeravtrykksalgoritmen i CertDigest skal være "http://www.w3.org/2000/09/xmldsig#sha1":http://www.w3.org/2000/09/xmldsig#sha1.. 
[4] krav 6.2.1 «Placement of the signing certificate”. Alle sertifikater fra virkomhetsertifikatet og opp til en tiltrodd rot skal være inkludert.
[4] krav 6.2.2 “Canonicalization of ds:SignedInfo element” skal være "http://www.w3.org/2006/12/xml-c14n11":http://www.w3.org/2006/12/xml-c14n11
[4] krav 6.2.3 “Profile of ds:Reference element”. Alle dokumenter skal være med, og det er ikke lov med referanser utenfor dokumentpakken.
[4] krav 6.2.4 “Transforms within ds:Reference element”. Alle fil-referansene skal være uten transform, og referansen til SignedProperties skal være "http://www.w3.org/TR/2001/REC-xml-c14n-20010315":http://www.w3.org/TR/2001/REC-xml-c14n-20010315
[4] krav 6.3.1 “Profile of xades:SigningCertificate element”. Ingen ytterlige begrensninger.
[4] krav 6.3.2 “Profile of xades:SigningTime element”. Tidsangivelsen skal være korrekt innenfor +/- 5 sekunder.
[4] krav 6.3.3 “Profile of xades:DataObjectFormat element”. Kun MimeType og ObjectReference skal være med.

h3. Konfidensialitet

Dokumentpakken krypteres med en 256-bit AES nøkkel i modus AES-GCM. Det skal genereres en ny nøkkel for hver kryptering av en dokumentpakke. 
I parameterne til GCM skal det være «Tag Length» lik null, og en IV bestående av bare nuller. IV lik null er sikkerhetsmessig ikke et problem fordi den aldri blir gjentatt ettersom nøkkelen bare brukes en gang.

Det er avsenders ansvar å generere en AES-nøkkel med tilstrekkelig tilfeldighet. Kilden bør være en sertifisert tilfeldig tall generator (TRNG).

AES-nøkkelen krypteres til mottakers sertifikat som beskrevet i "Dokumentpakke":Dokumentpakke.

 
